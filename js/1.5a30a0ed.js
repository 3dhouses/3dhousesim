(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0fe8":function(e,o,s){function t(e,o){let s=new BABYLON.Scene(e),t=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/3,75,new BABYLON.Vector3(0,0,4.5),s);t.attachControl(o,!0);new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(5,10,0),s);let r=function(e,o){return new BABYLON.Vector3(e,0,o)},n=function(e,o){this.width=e,this.height=o,this.left=0},h=function(e,o){this.door=e,this.left=o};var p=function(e,o){this.width=e,this.height=o,this.left=0,this.bottom=0},a=function(e,o,s){this.window=e,this.left=o,this.top=s},c=function(e,o,s){this.corner=e,this.doorSpaces=o||[],this.windowSpaces=s||[]},i=function(e,o,s,t,r){var n,h=[],p=[],a=[],c=[],i=t.interiorUV||new BABYLON.Vector4(0,0,1,1),u=t.exteriorUV||new BABYLON.Vector4(0,0,1,1),w=t.interiorColor||new BABYLON.Color4(1,1,1,1),x=t.exteriorColor||new BABYLON.Color4(1,1,1,1),l=t.interior||!1;l||e.push(e[0]);var d=[],y=[],B=[],z=[],f=[],g=[],S=[],L=[],N=0,O=0,A=BABYLON.Vector3.Zero(),V=BABYLON.Vector3.Zero(),Y=e.length;if(2===Y){e[1].corner.subtractToRef(e[0].corner,A);let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)),d[1]=e[1].corner,y[1]=e[1].corner.add(s.scale(o))}else if(Y>2){for(var m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[m]=e[m].corner,y[m]=e[m].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),A=V.clone()}if(l){let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[Y-1]=e[Y-1].corner,y[Y-1]=e[Y-1].corner.add(s.scale(o)),e[1].corner.subtractToRef(e[0].corner,A),s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize(),A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o))}else{e[1].corner.subtractToRef(e[0].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),d[Y-1]=d[0],y[Y-1]=y[0]}}for(m=0;m<Y;m++)B.push(new BABYLON.Vector3(d[m].x,s,d[m].z)),z.push(new BABYLON.Vector3(y[m].x,s,y[m].z));var v=0;for(m=0;m<Y-1;m++)v=Math.max(d[m+1].subtract(d[m]).length(),v);var M,C,b,P,T,R,D,U,I,Z,_=s,E=BABYLON.Vector3.Zero(),j=BABYLON.Vector3.Zero();for(m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,E),P=E.length(),E.normalize(),j.x=E.z,j.z=-1*E.x,T=y[m+1].subtract(y[m]).length(),Z=T-P;e[m].doorSpaces&&e[m].doorSpaces.sort(pe);var k=e[m].doorSpaces.length;M=[],M.push(new BABYLON.Vector2(0,0));for(var q=0;q<k;q++)M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,0)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,0));M.push(new BABYLON.Vector2(P,0)),M.push(new BABYLON.Vector2(P,s)),M.push(new BABYLON.Vector2(0,s)),C=new BABYLON.PolygonMeshBuilder("",M,r);for(var H=e[m].windowSpaces.length,F=[],Q=0;Q<H;Q++){var $=[];$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top)),F.push($)}for(var G=0;G<F.length;G++)C.addHole(F[G]);b=C.wallBuilder(e[m],e[m+1]);let t=h.length/3;C._points.elements.forEach((function(e){U=i.x+e.x*(i.z-i.x)/v,I=i.y+e.y*(i.w-i.y)/s,a.push(U,I),c.push(w.r,w.g,w.b,w.a)})),h=h.concat(b.positions),n=h.length/3,p=p.concat(b.indices.map((function(e){return e+t}))),D=b.positions.slice(12*(k+1)),R=b.positions.slice(3,3*(4*k+1));for(var J=[],K=[],X=0;X<R.length/12;X++){var W=[],ee=[];for(q=0;q<4;q++)W.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2])),R[3*q+12*X]+=o*j.x,R[3*q+12*X+2]+=o*j.z,ee.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2]));J.push(W),K.push(ee)}f.push(J),g.push(K);var oe=[],se=[];for(X=0;X<D.length/12;X++){var te=[],re=[];for(q=0;q<4;q++)te.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2])),D[3*q+12*X]+=o*j.x,D[3*q+12*X+2]+=o*j.z,re.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2]));oe.push(te),se.push(re)}S.push(oe),L.push(se),b.positions=[],b.positions.push(y[m].x,y[m].y,y[m].z),b.positions=b.positions.concat(R),b.positions.push(y[m+1].x,y[m+1].y,y[(m+1)%Y].z),b.positions.push(z[m+1].x,z[m+1].y,z[(m+1)%Y].z),b.positions.push(z[m].x,z[m].y,z[m].z),b.positions=b.positions.concat(D),C._points.elements.forEach((function(e){U=0==e.x?u.x:P-e.x<1e-6?u.x+(Z+e.x)*(u.z-u.x)/(v+Z):u.x+(.5*Z+e.x)*(u.z-u.x)/(v+Z),I=u.y+e.y*(u.w-u.y)/s,a.push(U,I)})),t=h.length/3,h=h.concat(b.positions),b.indices.reverse(),p=p.concat(b.indices.map((function(e){return e+t})));var ne=k,he=0;ne>0&&(t=h.length/3,h.push(d[m].x,d[m].y,d[m].z),h.push(y[m].x,y[m].y,y[m].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y),p.push(t,t+2,t+3,t+3,t+1,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3)),ne--,he++;while(ne>0)t=h.length/3,h.push(f[m][he-1][3].x,f[m][he-1][3].y,f[m][he-1][3].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he-1][3].x,g[m][he-1][3].y,g[m][he-1][3].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v,u.y+(u.w-u.y)*o/_),p.push(t,t+1,t+3,t+3,t+2,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3),ne--,he++;he--,t=h.length/3,k>0?(h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y+(u.w-u.y)*o/_)):(h.push(d[m].x,d[m].y,d[m].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(y[m].x,y[m].y,y[m].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*P/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*P/v,u.y+(u.w-u.y)*o/_)),p.push(t,t+1,t+3,t+3,t+2,t);for(let s=0;s<S[m].length;s++)t=h.length/3,h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x,u.y),p.push(t+1,t,t+3,t+2,t+3,t),t=h.length/3,h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),p.push(t+1,t,t+3,t+3,t,t+2),t=h.length/3,h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x),u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),p.push(t+1,t+2,t+3,t,t+2,t+1),t=h.length/3,h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y+(u.w-u.y)*o/_),p.push(t+3,t,t+2,t+1,t,t+3);t=h.length/3,h.push(B[m].x,B[m].y,B[m].z),h.push(B[m+1].x,B[m+1].y,B[m+1].z),h.push(z[m].x,z[m].y,z[m].z),h.push(z[m+1].x,z[m+1].y,z[m+1].z),U=u.x+.5*Z*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),U=u.x+(.5*Z+P)*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*T/(v+Z),u.y),p.push(t+1,t,t+3,t+2,t+3,t);for(X=n;X<h.length/3;X++)c.push(x.r,x.g,x.b,x.a);var pe=function(e,o){return e.left-o.left}}var ae=[];BABYLON.VertexData.ComputeNormals(h,p,ae),BABYLON.VertexData._ComputeSides(BABYLON.Mesh.FRONTSIDE,h,p,ae,a);var ce=new BABYLON.Mesh("custom",r),ie=new BABYLON.VertexData;return ie.positions=h,ie.indices=p,ie.normals=ae,ie.uvs=a,ie.colors=c,ie.applyToMesh(ce),ce},u=[-32,-7.5,-12,-7.5,-12,-10.5,9,-10.5,9,-24,21,-24,21,-14,31,-14,31,16,0,16,0,20.5,-12,20.5,-12,16,-32,16],w=[];for(let ye=0;ye<u.length/2;ye++)w.push(new r(u[2*ye],u[2*ye+1]));var x=new n(18,8),l=new h(x,1),d=new n(3,6.6),y=new h(d,13.5),B=new h(d,.5),z=new h(d,1),f=(p=new p(4.5,5.5),new a(p,3.2,.5)),g=new a(p,3.75,.5),S=new a(p,2.75,.5),L=new a(p,6,.5),N=new a(p,19,.5),O=new a(p,25,.5),A=new a(p,3.75,.5),V=new a(p,7.75,.5),Y=[];for(let ye=0;ye<w.length;ye++)Y.push(new c(w[ye]));Y[2].windowSpaces=[f],Y[4].windowSpaces=[g],Y[6].windowSpaces=[S],Y[8].windowSpaces=[L,N,O],Y[10].windowSpaces=[A],Y[12].windowSpaces=[V],Y[0].doorSpaces=[l],Y[2].doorSpaces=[y],Y[9].doorSpaces=[B],Y[13].doorSpaces=[z];var m=.5,v=9,M=i(Y,m,v,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1)},s);let C=new BABYLON.StandardMaterial("",s);C.diffuseTexture=new BABYLON.Texture("https://i.imgur.com/CGTCTfv.jpg",s),M.material=C;var b=[-12,16,-12,-7.5],P=[];for(let ye=0;ye<b.length/2;ye++)P.push(new r(b[2*ye],b[2*ye+1]));var T=[];for(let ye=0;ye<P.length;ye++)T.push(new c(P[ye]));let R=new h(d,19);T[0].doorSpaces=[R];var D=[9,-13.5,21,-13.5,21,-7.5,9,-7.5,9,-10.5],U=[];for(let ye=0;ye<D.length/2;ye++)U.push(new r(D[2*ye],D[2*ye+1]));var I=[];for(let ye=0;ye<U.length;ye++)I.push(new c(U[ye]));let Z=new h(d,1.5);I[0].doorSpaces=[Z],I[1].doorSpaces=[Z];var _=i(I,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);_.material=C;var E=[15,16,15,0,24,0,26,3,26,16],j=[];for(let ye=0;ye<E.length/2;ye++)j.push(new r(E[2*ye],E[2*ye+1]));var k=[];for(let ye=0;ye<j.length;ye++)k.push(new c(j[ye]));let q=new h(d,2.4),H=new h(d,.2),F=new h(d,.2);k[1].doorSpaces=[q],k[2].doorSpaces=[H],k[3].doorSpaces=[F];var Q=i(k,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);Q.material=C;var $=[26,3,31,3],G=[];for(let ye=0;ye<$.length/2;ye++)G.push(new r($[2*ye],$[2*ye+1]));var J=[];for(let ye=0;ye<G.length;ye++)J.push(new c(G[ye]));let K=i(J,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);K.material=C;var X=[24,0,31,0],W=[];for(let ye=0;ye<X.length/2;ye++)W.push(new r(X[2*ye],X[2*ye+1]));var ee=[];for(let ye=0;ye<W.length;ye++)ee.push(new c(W[ye]));let oe=i(ee,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);oe.material=C;var se=[21,-7.5,21,0],te=[];for(let ye=0;ye<se.length/2;ye++)te.push(new r(se[2*ye],se[2*ye+1]));var re=[];for(let ye=0;ye<te.length;ye++)re.push(new c(te[ye]));let ne=new h(d,2.25);re[0].doorSpaces=[ne];let he=i(re,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);he.material=C;var pe=[0,-10.5,0,3],ae=[];for(let ye=0;ye<pe.length/2;ye++)ae.push(new r(pe[2*ye],pe[2*ye+1]));var ce=[];for(let ye=0;ye<ae.length;ye++)ce.push(new c(ae[ye]));let ie=i(ce,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);ie.material=C;var ue=[0,-2,-12,-2],we=[];for(let ye=0;ye<ue.length/2;ye++)we.push(new r(ue[2*ye],ue[2*ye+1]));var xe=[];for(let ye=0;ye<we.length;ye++)xe.push(new c(we[ye]));let le=new h(d,8.5);xe[0].doorSpaces=[le];let de=i(xe,m,v,{interiorUV:new BABYLON.Vector4(.2,0,1,1),exteriorUV:new BABYLON.Vector4(.2,0,1,1),interior:!0},s);return de.material=C,s}s("4e82"),s("26e9"),e.exports=t},"1fb0":function(e,o,s){function t(e,o){var s=new BABYLON.Scene(e),t=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/3,75,new BABYLON.Vector3(0,0,4.5),s);t.attachControl(o,!0);new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(5,10,0),s);var r=function(e,o){return new BABYLON.Vector3(e,0,o)},n=function(e,o){this.width=e,this.height=o,this.left=0},h=function(e,o){this.door=e,this.left=o},p=function(e,o){this.width=e,this.height=o,this.left=0,this.bottom=0},a=function(e,o,s){this.window=e,this.left=o,this.top=s},c=function(e,o,s){this.corner=e,this.doorSpaces=o||[],this.windowSpaces=s||[]},i=function(e,o,s,t,r){var n,h=[],p=[],a=[],c=[],i=t.interiorUV||new BABYLON.Vector4(0,0,1,1),u=t.exteriorUV||new BABYLON.Vector4(0,0,1,1),w=t.interiorColor||new BABYLON.Color4(1,1,1,1),x=t.exteriorColor||new BABYLON.Color4(1,1,1,1),l=t.interior||!1;l||e.push(e[0]);var d=[],y=[],B=[],z=[],f=[],g=[],S=[],L=[],N=0,O=0,A=BABYLON.Vector3.Zero(),V=BABYLON.Vector3.Zero(),Y=e.length;if(2===Y){e[1].corner.subtractToRef(e[0].corner,A);let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)),d[1]=e[1].corner,y[1]=e[1].corner.add(s.scale(o))}else if(Y>2){for(var m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[m]=e[m].corner,y[m]=e[m].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),A=V.clone()}if(l){let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[Y-1]=e[Y-1].corner,y[Y-1]=e[Y-1].corner.add(s.scale(o)),e[1].corner.subtractToRef(e[0].corner,A),s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize(),A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o))}else{e[1].corner.subtractToRef(e[0].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),d[Y-1]=d[0],y[Y-1]=y[0]}}for(m=0;m<Y;m++)B.push(new BABYLON.Vector3(d[m].x,s,d[m].z)),z.push(new BABYLON.Vector3(y[m].x,s,y[m].z));var v=0;for(m=0;m<Y-1;m++)v=Math.max(d[m+1].subtract(d[m]).length(),v);var M,C,b,P,T,R,D,U,I,Z,_=s,E=BABYLON.Vector3.Zero(),j=BABYLON.Vector3.Zero();for(m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,E),P=E.length(),E.normalize(),j.x=E.z,j.z=-1*E.x,T=y[m+1].subtract(y[m]).length(),Z=T-P;e[m].doorSpaces&&e[m].doorSpaces.sort(pe);var k=e[m].doorSpaces.length;M=[],M.push(new BABYLON.Vector2(0,0));for(var q=0;q<k;q++)M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,0)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,0));M.push(new BABYLON.Vector2(P,0)),M.push(new BABYLON.Vector2(P,s)),M.push(new BABYLON.Vector2(0,s)),C=new BABYLON.PolygonMeshBuilder("",M,r);for(var H=e[m].windowSpaces.length,F=[],Q=0;Q<H;Q++){var $=[];$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top)),F.push($)}for(var G=0;G<F.length;G++)C.addHole(F[G]);b=C.wallBuilder(e[m],e[m+1]);let t=h.length/3;C._points.elements.forEach((function(e){U=i.x+e.x*(i.z-i.x)/v,I=i.y+e.y*(i.w-i.y)/s,a.push(U,I),c.push(w.r,w.g,w.b,w.a)})),h=h.concat(b.positions),n=h.length/3,p=p.concat(b.indices.map((function(e){return e+t}))),D=b.positions.slice(12*(k+1)),R=b.positions.slice(3,3*(4*k+1));for(var J=[],K=[],X=0;X<R.length/12;X++){var W=[],ee=[];for(q=0;q<4;q++)W.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2])),R[3*q+12*X]+=o*j.x,R[3*q+12*X+2]+=o*j.z,ee.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2]));J.push(W),K.push(ee)}f.push(J),g.push(K);var oe=[],se=[];for(X=0;X<D.length/12;X++){var te=[],re=[];for(q=0;q<4;q++)te.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2])),D[3*q+12*X]+=o*j.x,D[3*q+12*X+2]+=o*j.z,re.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2]));oe.push(te),se.push(re)}S.push(oe),L.push(se),b.positions=[],b.positions.push(y[m].x,y[m].y,y[m].z),b.positions=b.positions.concat(R),b.positions.push(y[m+1].x,y[m+1].y,y[(m+1)%Y].z),b.positions.push(z[m+1].x,z[m+1].y,z[(m+1)%Y].z),b.positions.push(z[m].x,z[m].y,z[m].z),b.positions=b.positions.concat(D),C._points.elements.forEach((function(e){U=0==e.x?u.x:P-e.x<1e-6?u.x+(Z+e.x)*(u.z-u.x)/(v+Z):u.x+(.5*Z+e.x)*(u.z-u.x)/(v+Z),I=u.y+e.y*(u.w-u.y)/s,a.push(U,I)})),t=h.length/3,h=h.concat(b.positions),b.indices.reverse(),p=p.concat(b.indices.map((function(e){return e+t})));var ne=k,he=0;ne>0&&(t=h.length/3,h.push(d[m].x,d[m].y,d[m].z),h.push(y[m].x,y[m].y,y[m].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y),p.push(t,t+2,t+3,t+3,t+1,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3)),ne--,he++;while(ne>0)t=h.length/3,h.push(f[m][he-1][3].x,f[m][he-1][3].y,f[m][he-1][3].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he-1][3].x,g[m][he-1][3].y,g[m][he-1][3].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v,u.y+(u.w-u.y)*o/_),p.push(t,t+1,t+3,t+3,t+2,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3),ne--,he++;he--,t=h.length/3,k>0?(h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y+(u.w-u.y)*o/_)):(h.push(d[m].x,d[m].y,d[m].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(y[m].x,y[m].y,y[m].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*P/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*P/v,u.y+(u.w-u.y)*o/_)),p.push(t,t+1,t+3,t+3,t+2,t);for(let s=0;s<S[m].length;s++)t=h.length/3,h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x,u.y),p.push(t+1,t,t+3,t+2,t+3,t),t=h.length/3,h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),p.push(t+1,t,t+3,t+3,t,t+2),t=h.length/3,h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x),u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),p.push(t+1,t+2,t+3,t,t+2,t+1),t=h.length/3,h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y+(u.w-u.y)*o/_),p.push(t+3,t,t+2,t+1,t,t+3);t=h.length/3,h.push(B[m].x,B[m].y,B[m].z),h.push(B[m+1].x,B[m+1].y,B[m+1].z),h.push(z[m].x,z[m].y,z[m].z),h.push(z[m+1].x,z[m+1].y,z[m+1].z),U=u.x+.5*Z*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),U=u.x+(.5*Z+P)*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*T/(v+Z),u.y),p.push(t+1,t,t+3,t+2,t+3,t);for(X=n;X<h.length/3;X++)c.push(x.r,x.g,x.b,x.a);var pe=function(e,o){return e.left-o.left}}var ae=[];BABYLON.VertexData.ComputeNormals(h,p,ae),BABYLON.VertexData._ComputeSides(BABYLON.Mesh.FRONTSIDE,h,p,ae,a);var ce=new BABYLON.Mesh("custom",r),ie=new BABYLON.VertexData;return ie.positions=h,ie.indices=p,ie.normals=ae,ie.uvs=a,ie.colors=c,ie.applyToMesh(ce),ce},u=[-32,-7.5,-12,-7.5,-12,-10.5,9,-10.5,9,-24,21,-24,21,-14,31,-14,31,16,0,16,0,20.5,-12,20.5,-12,16,-32,16],w=[];for(let C=0;C<u.length/2;C++)w.push(new r(u[2*C],u[2*C+1]));let x=[];var l=.5;let d=[[30,0],[20,90],[15,0],[25,90],[-15,0],[-10,90],[-10,90,1],[-20,0,1],[10,90,1],[-20,0],[5,90],[-10,0,1],[5,90],[-5,0],[-5,90,1],[-5,0],[-20+l,90,1],[15+l,0,1,[-l,0]],[-15,0],[-20,90],[15+l,0,1,[-l,l]],[-20,0],[20,90],[-10,0],[-25,90],[45,0],[5,0,1]],y=-10,B=-20,z=[[y,B]];const f=e=>2*e*Math.PI/360;let g=!1;d.map((e=>{if(1===e[2]){let o=z.slice(-1)[0],s=o[0],t=o[1];g&&(o=x.slice(-1)[0][1]),s=o[0],t=o[1],e[3]&&(s+=e[3][0],t+=e[3][1]);let r=[s,t];s+=e[0]*Math.cos(f(e[1])),t+=e[0]*Math.sin(f(e[1]));let n=[];n.push(r),n.push([s,t]),x.push(n),g=!0}else g=!1,y+=e[0]*Math.cos(f(e[1])),B+=e[0]*Math.sin(f(e[1])),z.push([y,B])})),w=[],z.map((e=>{w.push(new r(e[0],e[1]))}));var S=new n(18,8),L=(new h(S,1),new n(4,6.6)),N=new n(3,6.6),O=new h(L,2),A=(new h(N,13.5),new h(N,.5),new h(N,1),p=new p(4.5,5.5),new a(p,5,.5)),V=new a(p,20,.5);new a(p,z[0][0],.5),new a(p,3.75,.5),new a(p,2.75,.5),new a(p,6,.5),new a(p,19,.5),new a(p,25,.5),new a(p,3.75,.5),new a(p,7.75,.5);let Y=[];for(let C=0;C<w.length;C++)Y.push(new c(w[C]));Y[0].windowSpaces=[A,V],Y[2].windowSpaces=[A],Y[3].windowSpaces=[A,V],Y[4].windowSpaces=[A],Y[1].doorSpaces=[O],Y[6].doorSpaces=[O];var m=9;console.log({walls:Y});var v=i(Y,l,m,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1)},s);let M=new BABYLON.StandardMaterial("",s);return M.diffuseTexture=new BABYLON.Texture("https://i.imgur.com/CGTCTfv.jpg",s),v.material=M,console.log(x),x.map((e=>{let o=[];e.map((e=>{console.log(e[0],e[1]),o.push(new r(e[0],e[1]))}));let t=[];console.log(e),console.log(e),console.log(e),console.log(e,l);for(let s=0;s<o.length;s++)t.push(new c(o[s]));console.log({wallsInner:t});i(t,l,m,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1),interior:!0},s)})),s}s("4e82"),s("26e9"),e.exports=t},"6d3e":function(e,o,s){function t(e,o){var s=new BABYLON.Scene(e),t=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/3,25,new BABYLON.Vector3(0,0,4.5),s);t.attachControl(o,!0);new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(5,10,0),s);var r=function(e,o){return new BABYLON.Vector3(e,0,o)},n=function(e,o){this.width=e,this.height=o,this.left=0},h=function(e,o){this.door=e,this.left=o},p=function(e,o){this.width=e,this.height=o,this.left=0,this.bottom=0},a=function(e,o,s){this.corner=e,this.doorSpaces=o||[],this.windowSpaces=s||[]},c=function(e,o,s,t){var r=[],n=0,h=0,p=BABYLON.Vector3.Zero();e[1].corner.subtractToRef(e[0].corner,p);var a=BABYLON.Vector3.Zero();e[2].corner.subtractToRef(e[1].corner,a);for(var c=e.length,i=0;i<=c;i++){n=Math.acos(BABYLON.Vector3.Dot(p,a)/(p.length()*a.length())),h=BABYLON.Vector3.Cross(a,p).normalize().y;let s=new BABYLON.Vector3(p.z,0,-1*p.x).normalize();p.normalize(),r[(i+1)%c]=e[(i+1)%c].corner.add(s.scale(o)).add(p.scale(h*o/Math.tan(n/2))),p=a.clone(),e[(i+3)%c].corner.subtractToRef(e[(i+2)%c].corner,a)}var u=[],w=[];for(i=0;i<c;i++)u.push(e[i].corner.x,e[i].corner.y,e[i].corner.z);for(i=0;i<c;i++)u.push(r[i].x,r[i].y,r[i].z);var x,l,d,y=u.length;for(i=0;i<y/3;i++)u.push(u[3*i]),u.push(s),u.push(u[3*i+2]);var B,z=BABYLON.Vector3.Zero(),f=BABYLON.Vector3.Zero();for(i=0;i<c;i++){e[(i+1)%c].corner.subtractToRef(e[i].corner,z),B=z.length(),z.normalize(),f.x=z.z,f.z=-1*z.x,e[i].doorSpaces&&e[i].doorSpaces.sort(_);for(var g=e[i].doorSpaces.length,S=[],L=e[i].windowSpaces.length,N=0;N<L;N++){var O=[];O.push(new BABYLON.Vector2(e[i].windowSpaces[N].left,s-e[i].windowSpaces[N].top-e[i].windowSpaces[N].window.height)),O.push(new BABYLON.Vector2(e[i].windowSpaces[N].left+e[i].windowSpaces[N].window.width,s-e[i].windowSpaces[N].top-e[i].windowSpaces[N].window.height)),O.push(new BABYLON.Vector2(e[i].windowSpaces[N].left+e[i].windowSpaces[N].window.width,s-e[i].windowSpaces[N].top)),O.push(new BABYLON.Vector2(e[i].windowSpaces[N].left,s-e[i].windowSpaces[N].top)),S.push(O)}x=[],x.push(new BABYLON.Vector2(0,0));for(var A=0;A<g;A++)x.push(new BABYLON.Vector2(e[i].doorSpaces[A].left,0)),x.push(new BABYLON.Vector2(e[i].doorSpaces[A].left,e[i].doorSpaces[A].door.height)),x.push(new BABYLON.Vector2(e[i].doorSpaces[A].left+e[i].doorSpaces[A].door.width,e[i].doorSpaces[A].door.height)),x.push(new BABYLON.Vector2(e[i].doorSpaces[A].left+e[i].doorSpaces[A].door.width,0));x.push(new BABYLON.Vector2(B,0)),x.push(new BABYLON.Vector2(B,s)),x.push(new BABYLON.Vector2(0,s)),l=new BABYLON.PolygonMeshBuilder("",x,t);for(var V=0;V<S.length;V++)l.addHole(S[V]);d=l.wallBuilder(e[i],e[(i+1)%c]),d.positions.splice(3*(4*g+1),9),d.positions.splice(0,3);let r=u.length/3;u=u.concat(d.positions),w=w.concat(d.indices.map((function(e){return 0==e?i:e==4*g+1?(i+1)%c:e==4*g+2?(i+1)%c+2*c:e==4*g+3?i+2*c:e>4*g?e+r-4:e+r-1}))),y=u.length;for(var Y=r;Y<y/3;Y++)u.push(u[3*Y]+o*f.x,u[3*Y+1],u[3*Y+2]+o*f.z);d.indices.reverse(),w=w.concat(d.indices.map((function(e){return 0==e?i+c:e==4*g+1?(i+1)%c+c:e==4*g+2?(i+1)%c+3*c:e==4*g+3?i+3*c:e>4*g?e+r-4+4*(g+L):e+r-1+4*(g+L)})));var m=g,v=0,M=i,C=r+4*v,b=C+1,P=b+1,T=P+1,R=M+c,D=C+4*(g+L),U=b+4*(g+L),I=P+4*(g+L),Z=T+4*(g+L);m>0&&(w.push(M,C,D,D,R,M),w.push(C,b,U,C,U,D),w.push(U,P,I,U,b,P),w.push(P,Z,I,P,T,Z)),m--,v++;while(m>0)M=T,C+=4,b+=4,P+=4,T+=4,R=Z,D+=4,U+=4,I+=4,Z+=4,w.push(M,C,D,D,R,M),w.push(C,b,U,C,U,D),w.push(U,P,I,U,b,P),w.push(P,Z,I,P,T,Z),m--,v++;g>0&&(M=T,R=Z),w.push(M,(i+1)%c,(i+1)%c+c,R,M,(i+1)%c+c);var _=function(e,o){return e.left-o.left}}for(i=0;i<c;i++)w.push(3*c+(i+1)%c,2*c+(i+1)%c,3*c+i,i+3*c,(i+1)%c+2*c,i+2*c);var E=[],j=[];BABYLON.VertexData.ComputeNormals(u,w,E),BABYLON.VertexData._ComputeSides(BABYLON.Mesh.FRONTSIDE,u,w,E,j);var k=new BABYLON.Mesh("custom",t),q=new BABYLON.VertexData;return q.positions=u,q.indices=w,q.normals=E,q.uvs=j,q.applyToMesh(k),k};let i=[-5,0,5,0,5,10,-5,10];var u=[];for(let B=0;B<i.length/2;B++)u.push(new r(i[2*B],i[2*B+1]));n=new n(1,2),new p(2.25,1.25);var w=[];for(let B=0;B<u.length;B++)w.push(new a(u[B],[new h(n,2)]));var x=.3,l=5,d=c(w,x,l,s);function y(e,o,t,r){var n=e.getVerticesData(BABYLON.VertexBuffer.NormalKind),h=e.getVerticesData(BABYLON.VertexBuffer.PositionKind);t=t||BABYLON.Color3.White(),r=r||s,o=o||1;for(var p=[],a=0;a<n.length;a+=3){var c=BABYLON.Vector3.FromArray(h,a),i=c.add(BABYLON.Vector3.FromArray(n,a).scaleInPlace(o));p.push([c.add(e.position),i.add(e.position)])}var u=BABYLON.MeshBuilder.CreateLineSystem("normalLines",{lines:p},r);return u.color=t,u}return y(d,2,new BABYLON.Color3(1,0,0)),s}s("4e82"),s("26e9"),e.exports=t},"73d3":function(e,o){function s(e,o){let s=new BABYLON.Scene(e),t=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/3,25,new BABYLON.Vector3(0,0,4.5),s);t.attachControl(o,!0);new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(5,10,0),s);let r=function(e,o){return new BABYLON.Vector3(e,0,o)},n=function(e){this.corner=e},h=function(e,o,s,t){let r=[],n=0,h=0,p=BABYLON.Vector3.Zero();e[1].corner.subtractToRef(e[0].corner,p);let a=BABYLON.Vector3.Zero();e[2].corner.subtractToRef(e[1].corner,a);let c=e.length;for(var i=0;i<=c;i++){n=Math.acos(BABYLON.Vector3.Dot(p,a)/(p.length()*a.length())),h=BABYLON.Vector3.Cross(a,p).normalize().y;let s=new BABYLON.Vector3(p.z,0,-1*p.x).normalize();p.normalize(),r[(i+1)%c]=e[(i+1)%c].corner.add(s.scale(o)).add(p.scale(h*o/Math.tan(n/2))),p=a.clone(),e[(i+3)%c].corner.subtractToRef(e[(i+2)%c].corner,a)}let u=[],w=[];for(i=0;i<c;i++)u.push(e[i].corner.x,e[i].corner.y,e[i].corner.z);for(i=0;i<c;i++)u.push(r[i].x,r[i].y,r[i].z);for(i=0;i<c;i++)w.push(i,(i+1)%c,c+(i+1)%c,i,c+(i+1)%c,i+c);let x=u.length;for(i=0;i<x/3;i++)u.push(u[3*i]),u.push(s),u.push(u[3*i+2]);x=w.length;for(var l=0;l<x/3;l++)w.push(w[3*l+2]+2*c,w[3*l+1]+2*c,w[3*l]+2*c);for(i=0;i<c;i++)w.push(i,i+2*c,(i+1)%c+2*c,i,(i+1)%c+2*c,(i+1)%c),w.push((i+1)%c+3*c,i+3*c,i+c,(i+1)%c+c,(i+1)%c+3*c,i+c);let d=[],y=[];BABYLON.VertexData.ComputeNormals(u,w,d),BABYLON.VertexData._ComputeSides(BABYLON.Mesh.FRONTSIDE,u,w,d,y);let B=new BABYLON.Mesh("custom",t),z=new BABYLON.VertexData;return z.positions=u,z.indices=w,z.normals=d,z.uvs=y,z.applyToMesh(B),B},p=[-5,0,5,0,5,6,2,6,2,9,-5,9],a=[];for(let x=0;x<p.length/2;x++)a.push(new r(p[2*x],p[2*x+1]));let c=[[-5,0],[5,0],[5,6],[2,6],[2,9],[-5,9]];a=[],c.map((e=>{a.push(new r(e[0],e[1]))}));let i=[];for(let x=0;x<a.length;x++)i.push(new n(a[x]));let u=.3,w=5;h(i,u,w,s);return s}e.exports=s},8341:function(e,o,s){function t(e,o){var s=new BABYLON.Scene(e),t=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/3,75,new BABYLON.Vector3(0,0,4.5),s);t.attachControl(o,!0);new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(5,10,0),s);var r=function(e,o){return new BABYLON.Vector3(e,0,o)},n=function(e,o){this.width=e,this.height=o,this.left=0},h=function(e,o){this.door=e,this.left=o},p=function(e,o){this.width=e,this.height=o,this.left=0,this.bottom=0},a=function(e,o,s){this.window=e,this.left=o,this.top=s},c=function(e,o,s){this.corner=e,this.doorSpaces=o||[],this.windowSpaces=s||[]},i=function(e,o,s,t,r){var n,h=[],p=[],a=[],c=[],i=t.interiorUV||new BABYLON.Vector4(0,0,1,1),u=t.exteriorUV||new BABYLON.Vector4(0,0,1,1),w=t.interiorColor||new BABYLON.Color4(1,1,1,1),x=t.exteriorColor||new BABYLON.Color4(1,1,1,1),l=t.interior||!1;l||e.push(e[0]);var d=[],y=[],B=[],z=[],f=[],g=[],S=[],L=[],N=0,O=0,A=BABYLON.Vector3.Zero(),V=BABYLON.Vector3.Zero(),Y=e.length;if(2===Y){e[1].corner.subtractToRef(e[0].corner,A);let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)),d[1]=e[1].corner,y[1]=e[1].corner.add(s.scale(o))}else if(Y>2){for(var m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[m]=e[m].corner,y[m]=e[m].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),A=V.clone()}if(l){let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[Y-1]=e[Y-1].corner,y[Y-1]=e[Y-1].corner.add(s.scale(o)),e[1].corner.subtractToRef(e[0].corner,A),s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize(),A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o))}else{e[1].corner.subtractToRef(e[0].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),d[Y-1]=d[0],y[Y-1]=y[0]}}for(m=0;m<Y;m++)B.push(new BABYLON.Vector3(d[m].x,s,d[m].z)),z.push(new BABYLON.Vector3(y[m].x,s,y[m].z));var v=0;for(m=0;m<Y-1;m++)v=Math.max(d[m+1].subtract(d[m]).length(),v);var M,C,b,P,T,R,D,U,I,Z,_=s,E=BABYLON.Vector3.Zero(),j=BABYLON.Vector3.Zero();for(m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,E),P=E.length(),E.normalize(),j.x=E.z,j.z=-1*E.x,T=y[m+1].subtract(y[m]).length(),Z=T-P;e[m].doorSpaces&&e[m].doorSpaces.sort(pe);var k=e[m].doorSpaces.length;M=[],M.push(new BABYLON.Vector2(0,0));for(var q=0;q<k;q++)M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,0)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,0));M.push(new BABYLON.Vector2(P,0)),M.push(new BABYLON.Vector2(P,s)),M.push(new BABYLON.Vector2(0,s)),C=new BABYLON.PolygonMeshBuilder("",M,r);for(var H=e[m].windowSpaces.length,F=[],Q=0;Q<H;Q++){var $=[];$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top)),F.push($)}for(var G=0;G<F.length;G++)C.addHole(F[G]);b=C.wallBuilder(e[m],e[m+1]);let t=h.length/3;C._points.elements.forEach((function(e){U=i.x+e.x*(i.z-i.x)/v,I=i.y+e.y*(i.w-i.y)/s,a.push(U,I),c.push(w.r,w.g,w.b,w.a)})),h=h.concat(b.positions),n=h.length/3,p=p.concat(b.indices.map((function(e){return e+t}))),D=b.positions.slice(12*(k+1)),R=b.positions.slice(3,3*(4*k+1));for(var J=[],K=[],X=0;X<R.length/12;X++){var W=[],ee=[];for(q=0;q<4;q++)W.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2])),R[3*q+12*X]+=o*j.x,R[3*q+12*X+2]+=o*j.z,ee.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2]));J.push(W),K.push(ee)}f.push(J),g.push(K);var oe=[],se=[];for(X=0;X<D.length/12;X++){var te=[],re=[];for(q=0;q<4;q++)te.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2])),D[3*q+12*X]+=o*j.x,D[3*q+12*X+2]+=o*j.z,re.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2]));oe.push(te),se.push(re)}S.push(oe),L.push(se),b.positions=[],b.positions.push(y[m].x,y[m].y,y[m].z),b.positions=b.positions.concat(R),b.positions.push(y[m+1].x,y[m+1].y,y[(m+1)%Y].z),b.positions.push(z[m+1].x,z[m+1].y,z[(m+1)%Y].z),b.positions.push(z[m].x,z[m].y,z[m].z),b.positions=b.positions.concat(D),C._points.elements.forEach((function(e){U=0==e.x?u.x:P-e.x<1e-6?u.x+(Z+e.x)*(u.z-u.x)/(v+Z):u.x+(.5*Z+e.x)*(u.z-u.x)/(v+Z),I=u.y+e.y*(u.w-u.y)/s,a.push(U,I)})),t=h.length/3,h=h.concat(b.positions),b.indices.reverse(),p=p.concat(b.indices.map((function(e){return e+t})));var ne=k,he=0;ne>0&&(t=h.length/3,h.push(d[m].x,d[m].y,d[m].z),h.push(y[m].x,y[m].y,y[m].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y),p.push(t,t+2,t+3,t+3,t+1,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3)),ne--,he++;while(ne>0)t=h.length/3,h.push(f[m][he-1][3].x,f[m][he-1][3].y,f[m][he-1][3].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he-1][3].x,g[m][he-1][3].y,g[m][he-1][3].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v,u.y+(u.w-u.y)*o/_),p.push(t,t+1,t+3,t+3,t+2,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3),ne--,he++;he--,t=h.length/3,k>0?(h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y+(u.w-u.y)*o/_)):(h.push(d[m].x,d[m].y,d[m].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(y[m].x,y[m].y,y[m].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*P/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*P/v,u.y+(u.w-u.y)*o/_)),p.push(t,t+1,t+3,t+3,t+2,t);for(let s=0;s<S[m].length;s++)t=h.length/3,h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x,u.y),p.push(t+1,t,t+3,t+2,t+3,t),t=h.length/3,h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),p.push(t+1,t,t+3,t+3,t,t+2),t=h.length/3,h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x),u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),p.push(t+1,t+2,t+3,t,t+2,t+1),t=h.length/3,h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y+(u.w-u.y)*o/_),p.push(t+3,t,t+2,t+1,t,t+3);t=h.length/3,h.push(B[m].x,B[m].y,B[m].z),h.push(B[m+1].x,B[m+1].y,B[m+1].z),h.push(z[m].x,z[m].y,z[m].z),h.push(z[m+1].x,z[m+1].y,z[m+1].z),U=u.x+.5*Z*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),U=u.x+(.5*Z+P)*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*T/(v+Z),u.y),p.push(t+1,t,t+3,t+2,t+3,t);for(X=n;X<h.length/3;X++)c.push(x.r,x.g,x.b,x.a);var pe=function(e,o){return e.left-o.left}}var ae=[];BABYLON.VertexData.ComputeNormals(h,p,ae),BABYLON.VertexData._ComputeSides(BABYLON.Mesh.FRONTSIDE,h,p,ae,a);var ce=new BABYLON.Mesh("custom",r),ie=new BABYLON.VertexData;return ie.positions=h,ie.indices=p,ie.normals=ae,ie.uvs=a,ie.colors=c,ie.applyToMesh(ce),ce},u=[];let w=[];var x=1;let l=16,d=14,y=14,B=13,z=4.5,f=15,g=[[-(f+d+1),90],[z,0],[d,90,1],[1,0],[B,0],[d,90,1,[0,0]],[1,0],[l,0],[d,90,1],[1,0],[y,0],[d,90],[-(l+1+y+1+B+1+z),0,1,[0,-x]],[1,90],[f,90]],S=1+y+1+l+1+B+1+z+1,L=1+d+1+f+1,N=-S/2,O=10;O=L/2;let A=[[N,O]];const V=e=>2*e*Math.PI/360;let Y=!1;g.map((e=>{if(1===e[2]){let o=A.slice(-1)[0],s=o[0],t=o[1];Y&&(o=w.slice(-1)[0][1]),s=o[0],t=o[1],e[3]&&(s+=e[3][0],t+=e[3][1]);let r=[s,t];s+=e[0]*Math.cos(V(e[1])),t+=e[0]*Math.sin(V(e[1]));let n=[];n.push(r),n.push([s,t]),w.push(n),Y=!0}else Y=!1,N+=e[0]*Math.cos(V(e[1])),O+=e[0]*Math.sin(V(e[1])),A.push([N,O])})),u=[],A.map((e=>{u.push(new r(e[0],e[1]))}));var m=new n(18,8),v=(new h(m,1),new n(4,6.6)),M=new n(3,6.6);new h(v,2),new h(M,13.5),new h(M,.5),new h(M,1),p=new p(4.5,5.5),new a(p,5,.5),new a(p,20,.5),new a(p,A[0][0],.5),new a(p,3.75,.5),new a(p,2.75,.5),new a(p,6,.5),new a(p,19,.5),new a(p,25,.5),new a(p,3.75,.5),new a(p,7.75,.5);let C=[];for(let R=0;R<u.length;R++)C.push(new c(u[R]));var b=9;console.log({walls:C});var P=i(C,x,b,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1)},s);let T=new BABYLON.StandardMaterial("",s);return T.diffuseTexture=new BABYLON.Texture("https://i.imgur.com/CGTCTfv.jpg",s),P.material=T,console.log(w),w.map((e=>{let o=[];e.map((e=>{console.log(e[0],e[1]),o.push(new r(e[0],e[1]))}));let t=[];console.log(e),console.log(e),console.log(e),console.log(e,x);for(let s=0;s<o.length;s++)t.push(new c(o[s]));console.log({wallsInner:t});i(t,x,b,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1),interior:!0},s)})),s}s("4e82"),s("26e9"),e.exports=t},"839d":function(e,o,s){function t(e,o){var s=new BABYLON.Scene(e),t=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/3,75,new BABYLON.Vector3(0,0,4.5),s);t.attachControl(o,!0);new BABYLON.HemisphericLight("hemiLight",new BABYLON.Vector3(5,10,0),s);var r=function(e,o){return new BABYLON.Vector3(e,0,o)},n=function(e,o){this.width=e,this.height=o,this.left=0},h=function(e,o){this.door=e,this.left=o},p=function(e,o){this.width=e,this.height=o,this.left=0,this.bottom=0},a=function(e,o,s){this.window=e,this.left=o,this.top=s},c=function(e,o,s){this.corner=e,this.doorSpaces=o||[],this.windowSpaces=s||[]},i=function(e,o,s,t,r){var n,h=[],p=[],a=[],c=[],i=t.interiorUV||new BABYLON.Vector4(0,0,1,1),u=t.exteriorUV||new BABYLON.Vector4(0,0,1,1),w=t.interiorColor||new BABYLON.Color4(1,1,1,1),x=t.exteriorColor||new BABYLON.Color4(1,1,1,1),l=t.interior||!1;l||e.push(e[0]);var d=[],y=[],B=[],z=[],f=[],g=[],S=[],L=[],N=0,O=0,A=BABYLON.Vector3.Zero(),V=BABYLON.Vector3.Zero(),Y=e.length;if(2===Y){e[1].corner.subtractToRef(e[0].corner,A);let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)),d[1]=e[1].corner,y[1]=e[1].corner.add(s.scale(o))}else if(Y>2){for(var m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[m]=e[m].corner,y[m]=e[m].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),A=V.clone()}if(l){let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[Y-1]=e[Y-1].corner,y[Y-1]=e[Y-1].corner.add(s.scale(o)),e[1].corner.subtractToRef(e[0].corner,A),s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize(),A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o))}else{e[1].corner.subtractToRef(e[0].corner,V),N=Math.PI-Math.acos(BABYLON.Vector3.Dot(A,V)/(A.length()*V.length())),O=BABYLON.Vector3.Cross(V,A).normalize().y;let s=new BABYLON.Vector3(A.z,0,-1*A.x).normalize();A.normalize(),d[0]=e[0].corner,y[0]=e[0].corner.add(s.scale(o)).add(A.scale(O*o/Math.tan(N/2))),d[Y-1]=d[0],y[Y-1]=y[0]}}for(m=0;m<Y;m++)B.push(new BABYLON.Vector3(d[m].x,s,d[m].z)),z.push(new BABYLON.Vector3(y[m].x,s,y[m].z));var v=0;for(m=0;m<Y-1;m++)v=Math.max(d[m+1].subtract(d[m]).length(),v);var M,C,b,P,T,R,D,U,I,Z,_=s,E=BABYLON.Vector3.Zero(),j=BABYLON.Vector3.Zero();for(m=0;m<Y-1;m++){e[m+1].corner.subtractToRef(e[m].corner,E),P=E.length(),E.normalize(),j.x=E.z,j.z=-1*E.x,T=y[m+1].subtract(y[m]).length(),Z=T-P;e[m].doorSpaces&&e[m].doorSpaces.sort(pe);var k=e[m].doorSpaces.length;M=[],M.push(new BABYLON.Vector2(0,0));for(var q=0;q<k;q++)M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,0)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,e[m].doorSpaces[q].door.height)),M.push(new BABYLON.Vector2(e[m].doorSpaces[q].left+e[m].doorSpaces[q].door.width,0));M.push(new BABYLON.Vector2(P,0)),M.push(new BABYLON.Vector2(P,s)),M.push(new BABYLON.Vector2(0,s)),C=new BABYLON.PolygonMeshBuilder("",M,r);for(var H=e[m].windowSpaces.length,F=[],Q=0;Q<H;Q++){var $=[];$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top-e[m].windowSpaces[Q].window.height)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left+e[m].windowSpaces[Q].window.width,s-e[m].windowSpaces[Q].top)),$.push(new BABYLON.Vector2(e[m].windowSpaces[Q].left,s-e[m].windowSpaces[Q].top)),F.push($)}for(var G=0;G<F.length;G++)C.addHole(F[G]);b=C.wallBuilder(e[m],e[m+1]);let t=h.length/3;C._points.elements.forEach((function(e){U=i.x+e.x*(i.z-i.x)/v,I=i.y+e.y*(i.w-i.y)/s,a.push(U,I),c.push(w.r,w.g,w.b,w.a)})),h=h.concat(b.positions),n=h.length/3,p=p.concat(b.indices.map((function(e){return e+t}))),D=b.positions.slice(12*(k+1)),R=b.positions.slice(3,3*(4*k+1));for(var J=[],K=[],X=0;X<R.length/12;X++){var W=[],ee=[];for(q=0;q<4;q++)W.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2])),R[3*q+12*X]+=o*j.x,R[3*q+12*X+2]+=o*j.z,ee.push(new BABYLON.Vector3(R[3*q+12*X],R[3*q+12*X+1],R[3*q+12*X+2]));J.push(W),K.push(ee)}f.push(J),g.push(K);var oe=[],se=[];for(X=0;X<D.length/12;X++){var te=[],re=[];for(q=0;q<4;q++)te.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2])),D[3*q+12*X]+=o*j.x,D[3*q+12*X+2]+=o*j.z,re.push(new BABYLON.Vector3(D[3*q+12*X],D[3*q+12*X+1],D[3*q+12*X+2]));oe.push(te),se.push(re)}S.push(oe),L.push(se),b.positions=[],b.positions.push(y[m].x,y[m].y,y[m].z),b.positions=b.positions.concat(R),b.positions.push(y[m+1].x,y[m+1].y,y[(m+1)%Y].z),b.positions.push(z[m+1].x,z[m+1].y,z[(m+1)%Y].z),b.positions.push(z[m].x,z[m].y,z[m].z),b.positions=b.positions.concat(D),C._points.elements.forEach((function(e){U=0==e.x?u.x:P-e.x<1e-6?u.x+(Z+e.x)*(u.z-u.x)/(v+Z):u.x+(.5*Z+e.x)*(u.z-u.x)/(v+Z),I=u.y+e.y*(u.w-u.y)/s,a.push(U,I)})),t=h.length/3,h=h.concat(b.positions),b.indices.reverse(),p=p.concat(b.indices.map((function(e){return e+t})));var ne=k,he=0;ne>0&&(t=h.length/3,h.push(d[m].x,d[m].y,d[m].z),h.push(y[m].x,y[m].y,y[m].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].left/v,u.y),p.push(t,t+2,t+3,t+3,t+1,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3)),ne--,he++;while(ne>0)t=h.length/3,h.push(f[m][he-1][3].x,f[m][he-1][3].y,f[m][he-1][3].z),h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(g[m][he-1][3].x,g[m][he-1][3].y,g[m][he-1][3].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(e[m].doorSpaces[he].left-(e[m].doorSpaces[he-1].left+e[m].doorSpaces[he-1].door.width))/v,u.y+(u.w-u.y)*o/_),p.push(t,t+1,t+3,t+3,t+2,t),t=h.length/3,h.push(f[m][he][0].x,f[m][he][0].y,f[m][he][0].z),h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(g[m][he][0].x,g[m][he][0].y,g[m][he][0].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),p.push(t,t+1,t+3,t,t+3,t+2),t=h.length/3,h.push(f[m][he][1].x,f[m][he][1].y,f[m][he][1].z),h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(g[m][he][1].x,g[m][he][1].y,g[m][he][1].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].doorSpaces[he].door.width/v,u.y+(u.w-u.y)*o/_),p.push(t+2,t+1,t+3,t+2,t,t+1),t=h.length/3,h.push(f[m][he][2].x,f[m][he][2].y,f[m][he][2].z),h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(g[m][he][2].x,g[m][he][2].y,g[m][he][2].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),a.push(u.x,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].doorSpaces[he].door.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),p.push(t,t+3,t+2,t,t+1,t+3),ne--,he++;he--,t=h.length/3,k>0?(h.push(f[m][he][3].x,f[m][he][3].y,f[m][he][3].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(g[m][he][3].x,g[m][he][3].y,g[m][he][3].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*(P-(e[m].doorSpaces[he].left+e[m].doorSpaces[he].door.width))/v,u.y+(u.w-u.y)*o/_)):(h.push(d[m].x,d[m].y,d[m].z),h.push(d[m+1].x,d[m+1].y,d[m+1].z),h.push(y[m].x,y[m].y,y[m].z),h.push(y[m+1].x,y[m+1].y,y[m+1].z),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*P/v,u.y),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*P/v,u.y+(u.w-u.y)*o/_)),p.push(t,t+1,t+3,t+3,t+2,t);for(let s=0;s<S[m].length;s++)t=h.length/3,h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),a.push(u.x+(u.z-u.x)*o/v,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x,u.y),p.push(t+1,t,t+3,t+2,t+3,t),t=h.length/3,h.push(S[m][s][0].x,S[m][s][0].y,S[m][s][0].z),h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(L[m][s][0].x,L[m][s][0].y,L[m][s][0].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),a.push(u.x,u.y+(u.w-u.y)*o/_),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),p.push(t+1,t,t+3,t+3,t,t+2),t=h.length/3,h.push(S[m][s][1].x,S[m][s][1].y,S[m][s][1].z),h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(L[m][s][1].x,L[m][s][1].y,L[m][s][1].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),a.push(u.x,u.y),a.push(u.x,u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),a.push(u.x+(u.z-u.x)*o/v,u.y),a.push(u.x+(u.z-u.x),u.y+(u.w-u.y)*e[m].windowSpaces[s].window.height/_),p.push(t+1,t+2,t+3,t,t+2,t+1),t=h.length/3,h.push(S[m][s][2].x,S[m][s][2].y,S[m][s][2].z),h.push(S[m][s][3].x,S[m][s][3].y,S[m][s][3].z),h.push(L[m][s][2].x,L[m][s][2].y,L[m][s][2].z),h.push(L[m][s][3].x,L[m][s][3].y,L[m][s][3].z),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*e[m].windowSpaces[s].window.width/v,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y+(u.w-u.y)*o/_),p.push(t+3,t,t+2,t+1,t,t+3);t=h.length/3,h.push(B[m].x,B[m].y,B[m].z),h.push(B[m+1].x,B[m+1].y,B[m+1].z),h.push(z[m].x,z[m].y,z[m].z),h.push(z[m+1].x,z[m+1].y,z[m+1].z),U=u.x+.5*Z*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),U=u.x+(.5*Z+P)*(u.z-u.x)/v,a.push(U,u.y+(u.w-u.y)*o/_),a.push(u.x,u.y),a.push(u.x+(u.z-u.x)*T/(v+Z),u.y),p.push(t+1,t,t+3,t+2,t+3,t);for(X=n;X<h.length/3;X++)c.push(x.r,x.g,x.b,x.a);var pe=function(e,o){return e.left-o.left}}var ae=[];BABYLON.VertexData.ComputeNormals(h,p,ae),BABYLON.VertexData._ComputeSides(BABYLON.Mesh.FRONTSIDE,h,p,ae,a);var ce=new BABYLON.Mesh("custom",r),ie=new BABYLON.VertexData;return ie.positions=h,ie.indices=p,ie.normals=ae,ie.uvs=a,ie.colors=c,ie.applyToMesh(ce),ce},u=[];let w=[];var x=1;let l=16,d=14,y=7,B=13,z=4.5,f=15,g=[[-(f+d+1),90],[z,0],[d,90,1],[1,0],[B,0],[d,90,1,[0,0]],[1,0],[l,0],[d,90,1],[1,0],[y,0],[d,90],[-(l+1+y+1+B+1+z),0,1,[0,-x]],[1,90],[f,90]],S=1+y+1+l+1+B+1+z+1,L=1+d+1+f+1,N=-S/2,O=10;O=L/2;let A=[[N,O]];const V=e=>2*e*Math.PI/360;let Y=!1;g.map((e=>{if(1===e[2]){let o=A.slice(-1)[0],s=o[0],t=o[1];Y&&(o=w.slice(-1)[0][1]),s=o[0],t=o[1],e[3]&&(s+=e[3][0],t+=e[3][1]);let r=[s,t];s+=e[0]*Math.cos(V(e[1])),t+=e[0]*Math.sin(V(e[1]));let n=[];n.push(r),n.push([s,t]),w.push(n),Y=!0}else Y=!1,N+=e[0]*Math.cos(V(e[1])),O+=e[0]*Math.sin(V(e[1])),A.push([N,O])})),u=[],A.map((e=>{u.push(new r(e[0],e[1]))}));var m=new n(18,8),v=(new h(m,1),new n(4,6.6)),M=new n(3,6.6);new h(v,2),new h(M,13.5),new h(M,.5),new h(M,1),p=new p(4.5,5.5),new a(p,5,.5),new a(p,20,.5),new a(p,A[0][0],.5),new a(p,3.75,.5),new a(p,2.75,.5),new a(p,6,.5),new a(p,19,.5),new a(p,25,.5),new a(p,3.75,.5),new a(p,7.75,.5);let C=[];for(let R=0;R<u.length;R++)C.push(new c(u[R]));var b=9;console.log({walls:C});var P=i(C,x,b,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1)},s);let T=new BABYLON.StandardMaterial("",s);return T.diffuseTexture=new BABYLON.Texture("https://i.imgur.com/CGTCTfv.jpg",s),P.material=T,console.log(w),w.map((e=>{let o=[];e.map((e=>{console.log(e[0],e[1]),o.push(new r(e[0],e[1]))}));let t=[];console.log(e),console.log(e),console.log(e),console.log(e,x);for(let s=0;s<o.length;s++)t.push(new c(o[s]));console.log({wallsInner:t});i(t,x,b,{interiorUV:new BABYLON.Vector4(.167,0,1,1),exteriorUV:new BABYLON.Vector4(0,0,.16,1),interior:!0},s)})),s}s("4e82"),s("26e9"),e.exports=t},"8b24":function(e,o,s){"use strict";s.r(o);var t=function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("q-page",{staticClass:"flex flex-center"},[s("canvas",{staticStyle:{position:"absolute",width:"100%",height:"100%",background:"transparent"},attrs:{id:"renderCanvas","touch-action":"none"}}),s("nav-links",{attrs:{prevPlan:e.prevPlan,nextPlan:e.nextPlan}})],1)},r=[],n=(s("5319"),function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",[s("q-page-sticky",{attrs:{position:"left",offset:[18,18]}},[s("q-btn",{attrs:{fab:"",icon:"navigate_before",color:"primary",to:e.prevPlan}},[s("q-tooltip",[e._v(" Previous plan ")])],1)],1),s("q-page-sticky",{attrs:{position:"right",offset:[18,18]}},[s("q-btn",{attrs:{fab:"",icon:"navigate_next",color:"primary",to:e.nextPlan}},[s("q-tooltip",[e._v(" Next plan ")])],1)],1)],1)}),h=[],p=s("93c5"),a=s.n(p),c={name:"navLinks",props:{nextPlan:{type:String,required:!0},prevPlan:{type:String,required:!0}},data(){return{plans:a.a.listPlans()}}},i=c,u=s("2877"),w=s("de5e"),x=s("9c40"),l=s("05c0"),d=s("eebe"),y=s.n(d),B=Object(u["a"])(i,n,h,!1,null,null,null),z=B.exports;y()(B,"components",{QPageSticky:w["a"],QBtn:x["a"],QTooltip:l["a"]});var f=s("633b"),g=s("cf57");let S,L;f["PolygonMeshBuilder"].prototype.wallBuilder=function(e,o){let s=[],t=o.corner.subtract(e.corner).normalize(),r=Math.acos(t.x);0!=t.z&&(r*=t.z/Math.abs(t.z)),this._points.elements.forEach((function(o){s.push(o.x*Math.cos(r)+e.corner.x,o.y,o.x*Math.sin(r)+e.corner.z)}));let n=[],h=earcut(this._epoints,this._eholes,2);for(var p=h.length;p>0;p--)n.push(h[p-1]);return{positions:s,indices:n}};var N={name:"PageIndex",components:{navLinks:z},created(){a.a.setVueObj(this),this.changeRoutes()},mounted(){},watch:{$route(e,o){let s=e.path.replace(/\//,"");this.changeRoutes(s)}},methods:{async showScene(){return new Promise((async()=>{let e=this.currentPlan.match(/[0-9]+$/)[0];e=parseInt(e)-1;const o=async e=>new Promise((o=>{this.$q.loading.show({spinner:g["a"]}),setTimeout((()=>{this.$q.loading.hide(),o()}),e)}));S=document.getElementById("renderCanvas"),S||await o(1e3),S=document.getElementById("renderCanvas"),L=new f["Engine"](S,!0,{preserveDrawingBuffer:!0,stencil:!0});const t=s("a221")(`./houseScene${e}`)(L,S);console.log(t),this.scene=t,this.showAxis(10),L.runRenderLoop((function(){t.render()})),window.addEventListener("resize",(function(){L.resize()}))}))},changeRoutes:async function(e){this.currentPlan=a.a.nextPlan().current;let{current:o,next:s,prev:t}=a.a.nextPlan(e);this.currentPlan=o,this.nextPlan=s,this.prevPlan=t,await this.showScene()},showAxis(e){let o=this.scene,s=function(e,s,t){let r=new f["DynamicTexture"]("DynamicTexture",50,o,!0);r.hasAlpha=!0,r.drawText(e,5,40,"bold 36px Arial",s,"transparent",!0);let n=new f["Mesh"].CreatePlane("TextPlane",t,o,!0);return n.material=new f["StandardMaterial"]("TextPlaneMaterial",o),n.material.backFaceCulling=!1,n.material.specularColor=new f["Color3"](0,0,0),n.material.diffuseTexture=r,n},t=f["Mesh"].CreateLines("axisX",[new f["Vector3"].Zero,new f["Vector3"](e,0,0),new f["Vector3"](.95*e,.05*e,0),new f["Vector3"](e,0,0),new f["Vector3"](.95*e,-.05*e,0)],o);t.color=new f["Color3"](1,0,0);let r=s("X","red",e/10);r.position=new f["Vector3"](.9*e,-.05*e,0);let n=f["Mesh"].CreateLines("axisY",[new f["Vector3"].Zero,new f["Vector3"](0,e,0),new f["Vector3"](-.05*e,.95*e,0),new f["Vector3"](0,e,0),new f["Vector3"](.05*e,.95*e,0)],o);n.color=new f["Color3"](0,1,0);let h=s("Y","green",e/10);h.position=new f["Vector3"](0,.9*e,-.05*e);let p=f["Mesh"].CreateLines("axisZ",[new f["Vector3"].Zero,new f["Vector3"](0,0,e),new f["Vector3"](0,-.05*e,.95*e),new f["Vector3"](0,0,e),new f["Vector3"](0,.05*e,.95*e)],o);p.color=new f["Color3"](0,0,1);let a=s("Z","blue",e/10);a.position=new f["Vector3"](0,.05*e,.9*e)}},data(){return{plans:a.a.listPlans(),currentPlan:a.a.nextPlan().current,nextPlan:a.a.nextPlan().next,prevPlan:a.a.nextPlan().prev}}},O=N,A=s("9989"),V=Object(u["a"])(O,t,r,!1,null,null,null);o["default"]=V.exports;y()(V,"components",{QPage:A["a"],QPageSticky:w["a"],QBtn:x["a"],QTooltip:l["a"]})},"93c5":function(e,o,s){s("5319");const t=["plan1","plan2"];class r{constructor(){}setVueObj(e){this.vueObj=e}listPlans(){return t}nextPlan(e){let o,s=window.location.href.match(/\/#.*/)[0].replace(/\/#\//,"");e&&(s=e),o=0===s.length?0:t.indexOf(s);let r=o+1,n=o-1;r>=t.length&&(r=0),n<0&&(n=t.length-1);let h={current:t[o],next:t[r],prev:t[n]};return h}previousPlan(){}}e.exports=new r},a221:function(e,o,s){var t={"./houseScene0":"839d","./houseScene0.js":"839d","./houseScene1":"8341","./houseScene1.js":"8341","./houseScene2":"1fb0","./houseScene2.js":"1fb0","./houseScene3":"0fe8","./houseScene3.js":"0fe8","./houseScene4":"73d3","./houseScene4.js":"73d3","./houseScene5":"6d3e","./houseScene5.js":"6d3e"};function r(e){var o=n(e);return s(o)}function n(e){if(!s.o(t,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return t[e]}r.keys=function(){return Object.keys(t)},r.resolve=n,e.exports=r,r.id="a221"}}]);